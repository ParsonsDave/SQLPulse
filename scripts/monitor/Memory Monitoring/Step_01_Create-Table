USE [SQLPulse]
GO

-- Insert values into the Modules table

	INSERT INTO dbo.Modules (ModuleName, ModuleVersion, ModuleDescription, IsEnabled)
		VALUES ('Memory', 1.1, 'Gathers and records data for memory utilization', 1)

-- Insert values into the ModuleActions table to cover what the module can do

	INSERT INTO dbo.ModuleActions (ModuleID, ActionType, SchemaNameSprocName, IsEnabled, ExecutionOrder, ActionDescription)
		VALUES ((SELECT ID FROM dbo.Modules WHERE ModuleName = 'Memory'), 'CollectData', 'Pulse', 'Module_Memory_CollectData', 1, 1, 'Collects Memory Counters for SQL')

	INSERT INTO Pulse.ModuleActions (ModuleID, ActionType, SchemaName, SprocName, IsEnabled, ExecutionOrder, ActionDescription)
		VALUES ((SELECT ID FROM Pulse.Modules WHERE ModuleName = 'Memory'), 'Rollup', 'Pulse', 'Module_Memory_MonthlyRollup', 1, 2, 'Performs the Monthly Rollup calculations for the Memory module')


-- Create the main table to hold Memory Counter data

CREATE TABLE [dbo].[tblMemoryCounters](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[EventTime] [datetime] NULL,
	[ObjectName] [nchar](128) NULL,
	[CounterName] [nchar](128) NULL,
	[InstanceName] [nchar](128) NULL,
	[CounterValue] [bigint] NULL,
	[CounterType] [int] NULL
) ON [PRIMARY]
GO